(function(e,r,v){var y,i,t=Date.now(),m={},c={},o={},u={},f={},b=".js",S=".json",x="pico.define('URL','FUNC')\n",n=function(e){return u[e]},k=function(){},O=function(r,e,t){if(m[r]&&!h(m[r]))return m[r];var n=j(r)||b,i=f[n];switch(i&&(e=i(r,e)),n){case b:var o,a={exports:{}},u={},s=e.call(t?{}:u,a.exports,N,a,O,function(e){return o=N(e)},M)||a.exports;return o&&(s=A(s,o)),"function"==typeof s&&(s.extend=T),u.load&&u.load(s),u.update&&(c[r]=[u.update,s]),r?m[r]=d(m[r],s):s;case S:try{return m[r]=JSON.parse(e)}catch(e){return console.error(r,e.message)}default:return m[r]=e}},s={run:k,inherit:k,reload:k,parse:k,define:O,import:k,export:k,env:n,ajax:k},a="undefined"==typeof requestAnimationFrame?function(e){return setTimeout(e,100)}:requestAnimationFrame,w=function(e){return e.substring(e.indexOf("{")+1,e.lastIndexOf("}"))},j=function(e){if(!e)return null;var r=e.lastIndexOf(".");return-1!==r&&-1===e.indexOf("/",r)?e.substr(r):null},l=function(r,t){if(!r.length)return t();F(r.shift(),function(e){if(e)return t(e);l(r,t)})},F=function(n,i){if(m[n]=m[n]||M.import(n),m[n])return i(null,m[n]);var e=n.indexOf("/"),r=~e?o[n.slice(0,e)]:0,t=r?n.slice(e+1):n;(r=r||o["~"]||"")instanceof Function?r(t,function(e,r){if(e)return i(e);E(n,r,i)}):M.ajax("get",r+t+(j(n)?"":b),null,null,function(e,r,t){if(4===r)return e?i(e):void E(n,t,i)})},p=function(e){return Object.defineProperties(Function("return arguments.callee.__proto__.apply(this,arguments)"),{name:{value:e},i:{value:t}})},h=function(e){return"function"==typeof e&&t===e.i},d=function(e,r){return e&&e!==r?(h(e)&&(e.prototype=r.prototype),e.__proto__=r,e):r},g=function(e){return h(e)?e.__proto__:e},T=function(e,r){return e?A(e,this,r):this},A=function(e,r,t){var n=g(e),i=g(r),o=typeof n,a=typeof i;switch(o){case"function":var u=n,s=n.prototype;break;case"object":if(o===a)return n.__proto__=i,n;u=function(){return i.apply(this,arguments)},s=n;break;default:return n}switch(Object.assign(u,i,g(t)),a){case"function":return u.prototype=Object.assign(Object.create(i.prototype),s,{constructor:i}),u;case"object":return u.prototype=Object.assign(Object.create(i),s),u;default:return n}},N=function(e,r){var t=m[e];return void 0===t?r?F(e,r):m[e]=p(e):(r&&setTimeout(r,0,null,t),t)},D=function(r,e,t,n){n=n||s;var i=r?'"use strict";\n'+e+(u.live?"":"//# sourceURL="+r):e,o=function(e){return m[e]||t.push(e),m[e]};try{var a=Function("exports","require","module","define","inherit","pico",i)}catch(e){return console.error(r,e.message)}return a.call({},{},o,{},O,o,n),a},E=function(r,e,t){if(t=t||k,m[r])return t(null,m[r]);if(b!==(j(r)||b))return t(null,O(r,e));var n=[],i=D(r,e,n);r&&(m[r]=p(r)),l(n,function(e){if(e)return t(e);t(null,O(r,i))})},I=function(e){var r;for(var t in c)(r=c[t])&&r[0](r[1],e);a(I)},M=e[r]={run:function(e,r){var t;for(var n in M.ajax=e.ajax||M.ajax,o=e.paths||o,u=e.env||u,f=e.preprocessors||f,i=e.importRule,m)(t=f[j(n)||b])&&(m[n]=t(n,m[n]));(e.onLoad||function(){arguments[arguments.length-1]()})(function(){E(e.name||null,w(r.toString()),function(e,r){if(e)return console.error(e);r&&r(),y&&y(),a(I)})})},reload:function(t,e,n){"function"==typeof e&&(n=e),n=n||k;var r=function(e,r){if(e)return n(e);n(null,m[t]=d(m[t],r))};delete m[t],n===e?F(t,r):E(t,e,r)},parse:E,define:O,import:function(r){if(Array.isArray(i)&&i.some(function(e){return e.match(r)}))return v(r)},export:N,env:n};O("pico/json",function(e,r,t,n,i,o){return{parse:function(t,n){return JSON.parse(t[0],function(e,r){switch(e[0]){case"$":if(n)return JSON.parse(t[r]);case"_":return t[r];default:return r}})},stringify:function(e,t){var n=[];return n.unshift(JSON.stringify(e,function(e,r){switch(e[0]){case"$":if(t)return n.push(JSON.stringify(r));case"_":return n.push(r);default:return r}})),n},path:function(e){var l=e;function p(e,r){return r<0?(e.length||0)+r:r}return function e(){if(!arguments.length)return l;var r=Array.isArray(l);switch(typeof arguments[0]){case"string":var t=arguments[0];switch(t){default:if(r){if(!l[0][t])break;l=l.map(function(e){return e[t]})}else{if(!l[t])break;l=l[t]}break;case"..":l=function e(r,t){if(r&&t&&"object"==typeof t){if(t[r])return t[r];for(var n,i,o=[],a=Object.keys(t),u=0;i=a[u];u++)(n=e(r,t[i]))&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));return o.length?o:void 0}}(arguments[1],l)||l;break;case"*":if(r)break;l=Object.keys(l).map(function(e){return l[e]})}break;case"object":var n=arguments[0];if(!Array.isArray(n))break;l=n.map(function(e){return l[p(l,e)]});break;case"number":for(var i=p(l,arguments[0]),o=p(l,arguments[1])||l.length-1||0,a=arguments[2]||1,u=[],s=[],c=i;c<=o;c+=a)u.push(l[c]),s.push(c);l=u;break;case"function":var f=arguments[0];l=r?l.map(f):f(l)}return Array.isArray(l)&&(l=l.filter(function(e){return null!=e})),1===l.length&&(l=l.pop()),e}}}}),O("pico/obj",function(){var p=["object","function"],h=["constructor"];return{extend:function e(r,t,n){var i=p.indexOf(typeof r),o=p.indexOf(typeof t);if(1===i&&(i=p.indexOf(typeof r.__proto__)),1===o&&(o=p.indexOf(typeof t.__proto__)),!r||null===t||-1===o&&o===i)return void 0===t?r:t;if(1===o)return o===i&&(t.prototype=r),t;var a,u,s=(n=n||{}).tidy;if(Array.isArray(t))if(n.mergeArr){var c,f,l={};for(c=0,f=(r=r||[]).length;c<f;c++)void 0===(u=r[c])&&s||(l[u]=u);for(c=0,f=t.length;c<f;c++)void 0===(u=t[c])&&s||(l[u]=u);for(a in r=[],l)r.push(l[a])}else r=t;else for(a in r=r||{},t)u=t[a],~h.indexOf(a)||void 0===u&&s||(r[a]=e(r[a],u,n));return r},extends:function(e,r,t){for(var n,i=this.extend,o=0;n=r[o];o++)e=i(e,n,t);return e},parseInts:function(e,r){for(var t=0,n=e.length;t<n;t++)e[t]=parseInt(e[t],r);return e},pluck:function(e,r){var t=[];if(e.length){var n,i,o,a,u,s={};for(o=0,a=e.length;o<a;o++)(n=e[o])&&void 0!==(i=n[r])&&(s[i]=i);for(u in s)t.push(s[u])}return t},dotchain:function e(r,t,n){if(!t||!t.length)return r;var i=r[t.shift()];return i?e(i,t):n}}}),O("pico/str",function(){Math.ceil;var e=Math.random;function o(e,r){var t=r[0];return"["+(t.getFunctionName()||t.getTypeName()+"."+t.getMethodName())+"@"+(t.isEval()?t.getEvalOrigin():t.getFileName())+":"+t.getLineNumber()+":"+t.getColumnNumber()+"]"}function a(e){var r=e.search("[#:%]");switch(r){case-1:case 0:return e}return[e.substring(0,r),e.substr(r)]}function u(t,n,i){if(!t.length)return i(null,n);!function e(r,t,n,i){var o=r.indexOf("/",t);if(-1===o)return n.push(a(r.substring(t))),i(null,n);n.push(a(r.substring(t,o))),e(r,o+1,n,i)}(t.shift(),0,[],function(e,r){if(e)return i(e);n.push(r),u(t,n,i)})}function s(e,r,t,n,i){switch(e[0]){default:return e===r;case"%":i[e.substr(1)]=parseFloat(r);break;case":":i[e.substr(1)]=r;break;case"#":i[e.substr(1)]=t.slice(n).join("/")}return!0}function c(e,r,t){if(e.length<r.length)return!1;for(var n,i,o=0,a=r.length;o<a;o++)if(i=r[o],n=e[o],Array.isArray(i)){if(0!==n.indexOf(i[0]))return!1;if(!s(i[1],n.substr(i[0].length),e,o,t))return!1}else if(!s(i,n,e,o,t))return!1;return e.splice(0,a),!0}return{codec:function(e,r){for(var t,n=0,i="";t=r.charCodeAt(n);n++)i+=String.fromCharCode(t^e);return i},hash:function(e){for(var r,t=0,n=0;r=e.charCodeAt(t);t++)n=(n<<3)-n+r|0;return n},rand:function(){return e().toString(36).substr(2)},pad:function(e,r,t){return this.tab(e,r,t)+e},tab:function(e,r,t){var n=r-String(e).length+1;return Array(0<n?n:0).join(t||"0")},template:function(e){for(var r,t,n=/<%(.+?)%>/g,i=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,o="var r=[];\n",a=0,u=function(e,r){return o+=r?e.match(i)?e+"\n":"r.push("+e+");\n":""!=e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",u};r=n.exec(e);)u(e.slice(a,r.index))(r[1],!0),a=r.index+r[0].length;return u(e.substr(a,e.length-a)),t=new Function("pico","d",(o+'return r.join("");').replace(/[\r\t\n]/g," ")),function(e){return t(M,e)}},compileRest:function(e,t){return t=t||[],-1===e.search("[|#:%]")||u(e.split("|"),[e],function(e,r){if(e)throw e;t.push(r)}),t},execRest:function(e,r,t){for(var n,i,o,a=e.split("/"),u=0;n=r[u];u++)if(c(a,n[1],t)){for(i=2;(o=n[i])&&c(a,o,t);i++);return n[0]}return null},log:function e(){var r=Error.prepareStackTrace,t=Error.stackTraceLimit;Error.prepareStackTrace=o,Error.stackTraceLimit=1;var n=new Error;Error.captureStackTrace(n,arguments[0]||e);var i=[(new Date).toISOString(),n.stack];console.log.apply(console,i.concat(Array.prototype.slice.call(arguments,1))),Error.prepareStackTrace=r,Error.stackTraceLimit=t},error:function e(){var r=Error.stackTraceLimit;Error.stackTraceLimit=4;var t=new Error;Error.captureStackTrace(t,arguments[0]||e);var n=[(new Date).toISOString()];(n=n.concat(Array.prototype.slice.call(arguments,1))).push("\n"),console.error.apply(console,n.concat(t.stack)),Error.stackTraceLimit=r}}}),O("pico/time",function(){var o=Math.max,a=Math.min,y=Math.floor,u=Math.ceil,s=function(e,r){return(e-r)/864e5},c=function(e,r,t){var n=r?1:0,i=new Date(e.getFullYear()+(t||0),0,1),o=(7-i.getDay())%7+n,a=s(e,i);return o<a?u((a-o)/7):c(e,r,-1)},p=function(e,r,t){var n=e.split("/"),i=n[0];if("*"===i)n[0]=r;else if((i=n[0]=parseInt(i))<r||t<i)return;return 1===n.length?n.push(0):n[1]=parseInt(n[1]),n},f=function(e,r,t){if("*"===e)return 0;var n=[];list=e.split(",");for(var i,o,a,u,s,c,f,l=0;i=list[l];l++){if(!(a=i.split("-")).length)return null;if(u=p(a[0],r,t),1!==a.length)if(s=p(a[1],r,t),o=u[0],c=s[0],f=s[1]||1,c<o){for(c=t;o<=c;o+=f)n.push(o);for(o=r,c=s[0];o<=c;o+=f)n.push(o)}else for(;o<=c;o+=f)n.push(o);else if(f=u[1])for(o=u[0];o<=t;o+=f)n.push(o);else n.push(u[0])}return n.sort(function(e,r){return e-r}),n},m=function(e,r,t){if(!r)return e;if(o.apply(Math,r.concat(e))===e)return e+(t-e)+a.apply(Math,r);for(var n=0,i=r.length;n<i;n++)if(r[n]>=e)return r[n];console.error("not suppose to be here",e,r,t)},b=function(e,r,t,n,i,o,a,u,s){if(1<r++)return s(0);var c=m(e.getMinutes(),t,60),f=m(e.getHours()+y(c/60),n,24),l=e.getDate(),p=e.getMonth(),h=e.getFullYear(),d=new Date(h,p,0).getDate();if(a){var g=e.getDay()+y(f/24);l+=m(g,a,7)-g}else l=m(l+y(f/24),i,d);if(p=m(p+1+y(l/d),o,12),e.getMonth()+1!==p)return b(new Date(h,p-1),r,t,n,i,o,a,u,s);if(h=m(h+y((p-1)/12),u,0),e.getFullYear()!==h)return b(new Date(h,p-1),r,t,n,i,o,a,u,s);var v=new Date(h,(p-1)%12).getTime();return v+=864e5*(l%d-1),v+=f%24*36e5,s(v+=c%60*6e4)};return{parse:function(e){var r=e.split(" ");if(r.length<6)return 0;var t=f(r[0],0,59);if(null==t)return 0;var n=f(r[1],0,23);if(null==n)return 0;var i=f(r[2],1,31);if(null==i)return 0;var o=f(r[3],1,12);if(null==o)return 0;var a=f(r[4],0,6);if(null==a)return 0;var u=f(r[5],1975,2075);return null==u?0:[t,n,i,o,a,u]},nearest:function(e,r,t,n,i,o){var a=new Date,u=m(a.getFullYear(),o,0),s=m(a.getMonth()+1,n,12)-1;if(a.getFullYear()!==u||a.getMonth()!==s)a=new Date(u,s);else{var c=a.getTime();a=new Date(c+6e4)}return b(a,0,e,r,t,n,i,o,function(e){return e})},daynum:s,weeknum:c,day:function(e,r){var t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),12,0,0)-e;return 0<=n&&n<=1296e5||n<=0&&-1296e5<n?t.getDate()===e.getDate()?"Today":e<t?"Yesterday":"Tomorrow":(r=r||"en-US",t.getFullYear()===e.getFullYear()&&c(t)===c(e)?e.toLocaleDateString(r,{weekday:"long"}):e.toLocaleDateString(r,{weekday:"short",month:"short",day:"numeric"}))}}}),O("pico/web",function(e,r,t,n,i,c){var h=r("pico/json"),d=Math.abs,o=Math.floor,a=Math.random,g=1,f=!0,u=function(e){e&&console.error(e)},v=function(e,r,t){e.append(r,t)},y=function(e,r,t){e[r]=t},m=function(i,o){o=o||u,c.ajax("get",i.url,null,null,function(e,r,t){if(4===r){if(e)return o(e);var n=parseInt(t);if(isNaN(n))return o("invalid timesync response");i.serverTime=n,i.serverTimeAtClient=Date.now(),o()}})},l=function(e,r,t,n){switch(e&&4===r&&m(n),r){case 2:n.head=null,n.currPT=g,n.resEndPos=0}if(t){var i,o=n.resEndPos,a=-1,u=n.delimiter,s=u.length,c=n.body;try{for(;-1!==(a=t.indexOf(u,o));){switch(n.currPT){case g:n.head=JSON.parse(t.substring(o,a)),c.length=0,n.currPT=2;break;case 2:c.push(t.substring(o,a))}if((i=n.head)&&i.len===c.length){if(n.currPT=g,i.resId&&n.request("ack",{resId:i.resId}),!i.reqId)return void console.error("incomplete response header: "+JSON.stringify(i));if(n.cullAge&&n.cullAge<d(n.getServerTime()-i.date))return void console.error("invalid server time: "+JSON.stringify(i)+" "+d(n.getServerTime()-i.date));if(n.secretKey&&c.length){for(var f=CryptoJS.algo.HMAC.create(CryptoJS.algo.MD5,n.secretKey+i.date),l=0,p=c.length;l<p;l++)f.update(c[l]);if(i.key!==f.finalize().toString(CryptoJS.enc.Base64))return void console.error("invalid server key: "+JSON.stringify(i))}i.len&&(i.data=h.parse(c,!0)),n.inbox.push(i),n.head=null}o=a+s}}catch(e){console.error(e)}n.resEndPos=4===r?0:o}},b=function(e,r,t,n,i){n=n||"",i=i||"";for(var o,a,u,s,c=e instanceof FormData?v:y,f=r.baseURI,l=0,p=r.elements;s=p[l];l++)if(s.hasAttribute("name"))if("FILE"===(o=s.hasAttribute("type")?s.getAttribute("type").toUpperCase():"TEXT"))for(a=0,u=s.files.length;a<u;c(e,n+s.name,s.files[a++]));else("RADIO"!==o&&"CHECKBOX"!==o||s.checked)&&c(e,n+s.name,s.value);if(t)for(var h in t)c(e,i+h,t[h]);return f=f.substring(0,f.lastIndexOf("/")+1),r.action.substr(f.length)},s=function(e,r){e.url=r.url||e.url,e.secretKey=r.secretKey||e.secretKey,e.cullAge=r.cullAge||e.cullAge,e.delimiter=r.delimiter?JSON.stringify(r.delimiter):e.delimiter};function p(e){if(!e.url)return console.error("url is not set");s(this,Object.assign({cullAge:0,delimiter:["&"]},e)),this.reqId=1+o(1e3*a()),this.inbox=[],this.outbox=[],this.uploads=[],this.callbacks={},this.acks=[],this.reqs=[],this.resEndPos=0,this.head=null,this.body=[],this.currPT=g,this.serverTime=0,this.serverTimeAtClient=0}return p.prototype={beat:function(){if(this.inbox.length)for(var e,r,t,n=this.inbox,i=this.callbacks;t=n.pop();)(r=i[e=t.reqId])&&(delete i[e],r(t.error,t.data));if(f&&(this.uploads.length||this.outbox.length||this.acks.length)){var o=this.uploads,a=this.outbox,u=this.acks;if(o.length)c.ajax("post",this.url,o.shift(),null,l,this);else{var s=this.reqs=u.concat(a);u.length=a.length=0,c.ajax("post",this.url,s.join(this.delimiter)+this.delimiter,null,l,this)}}},reconnect:function(e,r){var t;s(this,e),(t=this).resEndPos=t.outbox.length=t.acks.length=0,t.currPT=g,m(this,function(e){r(e,this)})},submit:function(e,r,t){if(!("undefined"!=typeof window&&e&&e instanceof HTMLFormElement))return console.error("No HTMLFormElement submitted");var n=0;t&&(n=this.reqId++,this.callbacks[n]=t);var i=new FormData;i.append("api",b(i,e,r,"data/","cred/")),i.append("reqId",n),this.uploads.push(i)},request:function(e,r,t,n){switch(arguments.length){case 2:r instanceof Function&&(n=r,r=t=void 0);break;case 3:t instanceof Function&&(n=t,t=void 0);break;case 4:break;default:return console.error("wrong request params!")}if("undefined"!=typeof window&&r instanceof HTMLFormElement){var i={};e=b(i,r),r=i}if(!e)return console.error("Missing api,  data["+JSON.stringify(r)+"]");var o=this.acks;if("ack"!==e&&(o=this.outbox).length){var a=o.shift();-1===a.indexOf(e)&&o.unshift(a)}var u=0;n&&(u=this.reqId++,this.callbacks[u]=n);var s=r?h.stringify(r,!0):[];if(s.unshift(JSON.stringify(t)),s.length&&this.secretKey){for(var c=this.getServerTime(),f=CryptoJS.algo.HMAC.create(CryptoJS.algo.MD5,this.secretKey+c),l=0,p=s.length;l<p;l++)f.update(s[l]);s.unshift(JSON.stringify({api:e,reqId:u,len:s.length,date:c,key:f.finalize().toString(CryptoJS.enc.Base64)}))}else s.unshift(JSON.stringify({api:e,reqId:u,len:s.length}));o.push(s.join(this.delimiter))},getServerTime:function(){return this.serverTime+(Date.now()-this.serverTimeAtClient)},test:function(e){m(this,e)}},{create:function(e,r){var t=new p(e);return m(t,function(e){r&&r(e,t)}),t},online:function(){f=!0},offline:function(){f=!1}}}),"object"==typeof process&&(M.ajax=M.ajax||function(e,r,t,n,i,o){var a=v("fs").readFileSync(r,"utf8");if(a)return setImmediate(i,null,4,a,o);setImmediate(i,"failed",4,null,o)}),O("pico/build",function(){var u=/['\n\r]/g,r={"'":"&#039;","\n":"\\n","\r":"\\n"},s=function(e){return r[e]};return function(t){var c=v("fs"),f=v("path"),l=t.shift(),p=t.shift(),o=O;function h(e,r){if(r&&r.length)return c.appendFileSync(e,c.readFileSync(r.shift())),c.appendFileSync(e,";\n"),h(e,r)}function d(r,t){if(!r||!r.length)return t();F(r.shift(),function(e){if(e)return t(e);d(r,t)})}function g(n,i){O=function(e,r,t){if(o(e,r,t,!0),e&&-1===i.indexOf(e))switch(j(e)||b){case b:return c.appendFileSync(n,x.replace("URL",e).replace("'FUNC'",r.toString()));case S:return c.appendFileSync(n,x.replace("URL",e).replace("FUNC",JSON.stringify(JSON.parse(r)).replace(u,s)));default:return c.appendFileSync(n,x.replace("URL",e).replace("FUNC",r.replace(u,s)))}}}I=k;var n=t.shift(),i=f.join(p,n.entry+b),a=n.exclude||[];g(i,a),c.unlink(i,function(){h(i,n.deps);var e=c.readFileSync(f.join(l,n.entry+b)),r=D(null,e,[],M);~a.indexOf(n.entry)||(y=function(){d(n.include,function(e){if(e)return console.error(e);c.appendFileSync(i,w(r.toString())),function n(i,o,a){if(!i||!i.length)return a;m=Object.assign({},o);var u=i.shift(),s=f.join(p,u.entry+b);g(s,u.exclude||[]),c.unlink(s,function(){h(s,u.deps),d(u.include,function(e){if(e)return console.error(e);var r=c.readFileSync(f.join(l,u.entry+b)),t=D(null,r,[],M);E(u.entry,r,function(e){if(e)return a(e);c.appendFileSync(s,w(t.toString())),n(i,o,a)})})})}(t,Object.assign({},m),function(){process.exit()})})})})}}),O("pico/test",function(){var t,n,i=M.export("pico/str"),o=void 0!==v,a=o?v("util").inspect:JSON.stringify,u={total:0,suceeded:0,failed:0,error:0},s=[],c={summary:u,results:s},f=!0;function l(e,r,t){f&&(console.log(e+":"+i.tab(e,100,".")+a(t,{colors:!0})),r&&console.error(r))}return{setup:function(e){n=e.end,f=e.stdout,t=o&&e.fname},ensure:function(e,r){u.total++,setTimeout(r,0,function(){(function(e,r){e?(u.error++,l(this,e,!1),s.push({msg:this,error:e,result:!1})):(r?u.suceeded++:u.failed++,l(this,e,r),s.push({msg:this,result:r,extra:Array.prototype.slice.call(arguments,2)})),u.total===u.suceeded+u.failed+u.error&&(f&&console.log("\nSummary:",u),t&&v("fs").writeFileSync(t,JSON.stringify(c)),n&&n(c),o&&process.exit(u.failed+u.error))}).apply(e,arguments)})}}})}).apply(null,"undefined"==typeof window?[module,"exports",require]:[window,"pico"]);
//# sourceMappingURL=bin/pico-cli.min.js.map